(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"0dng":function(e,t,a){e.exports={card:"card___1lLg_",heading:"heading___3iSdG",steps:"steps___2QPgQ",errorIcon:"errorIcon___3sjJd",errorPopover:"errorPopover___15mhh",errorListItem:"errorListItem___Wg8Mo",errorField:"errorField___1jSBm",editable:"editable___hpZUP",advancedForm:"advancedForm___3hN7R",optional:"optional___16e6u"}},"2OH4":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var i=l(a("bx4M"));a("14J3");var d=l(a("BMrR"));a("jCWc");var n=l(a("kPKH"));a("DZo9");var u=l(a("8z0m"));a("Pwec");var s=l(a("CtXQ")),o=l(a("pVnL"));a("+L6B");var m=l(a("2/Rp")),c=l(a("MVZn"));a("2qtc");var f=l(a("kLXV"));a("5NDa");var p=l(a("5rEg"));a("OaEy");var h=l(a("2fM7"));a("y8nQ");var g=l(a("Vl3Y"));a("Znn+");var v=l(a("ZTPi")),E=l(a("DlQD")),y=l(a("FIf5"));a("nyGS");var C,b,_,w=r(a("q1tI")),I=a("MuoO"),V=l(a("0dng")),P=a("dCQc"),k=a("20nU");E.default.setOptions({highlight:e=>y.default.highlightAuto(e).value});var L=v.default.TabPane,q=g.default.Item,A=h.default.Option,M=p.default.TextArea,S={labelCol:{sm:{span:2}},wrapperCol:{sm:{span:22}}},R={labelCol:{sm:{span:8}},wrapperCol:{sm:{span:10}}},F=(C=(0,I.connect)(e=>{var t=e.adminArticleCreate;return{adminArticleCreate:t}}),b=g.default.create(),C(_=b(_=class extends w.PureComponent{constructor(){super(...arguments),this.state={previewVisible:!1,uploadImageVisible:!1,previewImage:"",fileList:[]},this.handleChangeContent=(e=>{var t=this.props.dispatch;t({type:"adminArticleCreate/setState",payload:{output:(0,E.default)(e.target.value)}})}),this.handleCustomUploadImage=(e=>{var t=e.file,a=new FormData;a.append("img",t),(0,P.uploadImage)(a).then(e=>{var t=e.path;this.setState({uploadImageVisible:!1}),f.default.success({title:"\u4e0a\u4f20\u6210\u529f",content:`${k.MediaPath+t}`})})}),this.handleCreateArticle=(()=>{var e=this.props,t=e.form.validateFieldsAndScroll,a=e.dispatch;t((e,t)=>{if(!e)if(t["img"]){var l=t["img"].file,r=new FormData;r.append("img",l["originFileObj"]),(0,P.uploadImage)(r).then(e=>{var l=e.path,r=(0,c.default)({},t,{img:k.MediaPath+l,keywords:t.tags.join()});a({type:"adminArticleCreate/create",payload:r})})}else{var i=(0,c.default)({},t,{keywords:t.tags.join()});a({type:"adminArticleCreate/create",payload:i})}})}),this.handleCancel=(()=>this.setState({previewVisible:!1})),this.handlePreview=(e=>{this.setState({previewImage:e.thumbUrl,previewVisible:!0})}),this.handleChange=(e=>{var t=e.fileList;return this.setState({fileList:t})})}componentDidMount(){var e=this.props,t=e.dispatch,a=e.location;t({type:"adminArticleCreate/getTags"});var l=a.query.id;t(l?{type:"adminArticleCreate/getDetail",payload:l}:{type:"adminArticleCreate/setState",payload:{article:{},value:"",output:""}})}render(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.previewVisible,l=t.previewImage,r=t.fileList,c=this.props.adminArticleCreate,E=c.tags,y=c.article,C=c.value,b=c.output;return w.default.createElement(i.default,{className:V.default.card,bordered:!1},w.default.createElement(v.default,{tabBarExtraContent:w.default.createElement("div",null,w.default.createElement(m.default,{type:"primary",onClick:()=>{this.setState({uploadImageVisible:!0})},icon:"upload"},"\u4e0a\u4f20\u56fe\u7247"),w.default.createElement(m.default,{type:"primary",onClick:this.handleCreateArticle,style:{marginLeft:10}},"\u63d0\u4ea4"))},w.default.createElement(L,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},w.default.createElement(g.default,{hideRequiredMark:!0},w.default.createElement(q,(0,o.default)({},S,{label:"\u6807\u9898"}),e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],initialValue:y?y["title"]:null})(w.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),w.default.createElement(q,(0,o.default)({},S,{label:"URL"}),e("url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165URL"}],initialValue:y?y["url"]:null})(w.default.createElement(p.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165URL"}))),w.default.createElement(q,(0,o.default)({},S,{label:"\u6458\u8981"}),e("description",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6458\u8981"}],initialValue:y?y["description"]:null})(w.default.createElement(M,{rows:3,placeholder:"\u8bf7\u8f93\u5165\u6458\u8981"}))),w.default.createElement(q,(0,o.default)({},S,{label:"\u6807\u7b7e"}),e("tags",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u7b7e"}],initialValue:y?y["tags"]:[]})(w.default.createElement(h.default,{mode:"tags",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6587\u7ae0\u6807\u7b7e",onChange:this.handleTagChange},E.map(e=>w.default.createElement(A,{key:e["name"]},e["name"]))))),w.default.createElement(d.default,{gutter:16},w.default.createElement(n.default,{span:6},w.default.createElement(q,(0,o.default)({},R,{label:"\u5c01\u9762\u56fe"}),e("img",{})(w.default.createElement(u.default,{name:"img",listType:"picture",fileList:r,disabled:1===r.length,onPreview:this.handlePreview,onChange:this.handleChange},w.default.createElement(m.default,null,w.default.createElement(s.default,{type:"upload"})))))),w.default.createElement(n.default,{span:6},w.default.createElement(q,(0,o.default)({},R,{label:"\u72b6\u6001"}),e("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u72b6\u6001"}],initialValue:y["status"]?y["status"]:1})(w.default.createElement(h.default,{style:{width:"100%"}},w.default.createElement(A,{value:1},"\u53d1\u5e03"),w.default.createElement(A,{value:2},"\u8349\u7a3f"))))),w.default.createElement(n.default,{span:6},w.default.createElement(q,(0,o.default)({},R,{label:"\u7c7b\u578b"}),e("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u578b"}],initialValue:y["type"]?y["type"]:1})(w.default.createElement(h.default,{style:{width:"100%"}},w.default.createElement(A,{value:1},"\u6587\u7ae0"),w.default.createElement(A,{value:2},"\u4e13\u9898")))))))),w.default.createElement(L,{tab:"\u6587\u7ae0\u5185\u5bb9",key:"2"},w.default.createElement(g.default,{hideRequiredMark:!0},w.default.createElement(q,null,e("content",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:C})(w.default.createElement(M,{onChange:this.handleChangeContent,placeholder:"\u8bf7\u8f93\u5165",autosize:{minRows:20}}))))),w.default.createElement(L,{tab:"\u6587\u7ae0\u9605\u89c8",key:"3"},w.default.createElement("div",{dangerouslySetInnerHTML:{__html:b}}))),w.default.createElement(f.default,{visible:a,footer:null,onCancel:this.handleCancel},w.default.createElement("img",{style:{width:"100%"},src:l})),w.default.createElement(f.default,{visible:this.state.uploadImageVisible,footer:null,onCancel:()=>{this.setState({uploadImageVisible:!1})},destroyOnClose:!0,keyboard:!1,maskClosable:!1},w.default.createElement(u.default,{name:"img",listType:"picture",onPreview:this.handlePreview,customRequest:this.handleCustomUploadImage},w.default.createElement(m.default,null,w.default.createElement(s.default,{type:"upload"}),"\u4e0a\u4f20\u56fe\u7247"))))}})||_)||_),D=F;t.default=D}}]);