(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{R9X0:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var m=l(a("BMrR"));a("jCWc");var r=l(a("kPKH"));a("2qtc");var i=l(a("kLXV"));a("/zsF");var o=l(a("PArb"));a("+L6B");var c=l(a("2/Rp"));a("y8nQ");var d=l(a("Vl3Y"));a("Mwp2");var s=l(a("VXEj"));a("i5XK");var u=l(a("jq9l"));a("Pwec");var h=l(a("CtXQ"));a("5NDa");var f=l(a("5rEg")),p=n(a("q1tI")),C=a("MuoO"),y=a("TJpk"),E=l(a("bnNk")),g=l(a("XfOM")),v=l(a("mOP9")),b=a("+n12"),_=l(a("DlQD")),k=l(a("FIf5"));a("nyGS");var R,S,N=l(a("eLi/")),w=f.default.TextArea;_.default.setOptions({highlight:e=>k.default.highlightAuto(e).value});var D=e=>{var t=e.type,a=e.text,l=e.theme;return p.default.createElement("span",null,p.default.createElement(h.default,{type:t,theme:l,style:{marginRight:8}}),a)},F=e=>{var t=e.comment,a=e.handleReplyComment;return p.default.createElement(u.default,{actions:[p.default.createElement("span",{onClick:()=>a(t)},"\u56de\u590d")],author:t["account"]["nick_name"],avatar:`/media/${t["account"]["avatar"]}`,content:t["content"],datetime:(0,b.formatDateTime)(t["ct"])},t["children"]&&t["children"].length>0?t["children"].map(e=>p.default.createElement(F,{handleReplyComment:a,key:e["id"],comment:e})):p.default.createElement(p.Fragment,null))},L=e=>{var t=e.comments,a=e.handleReplyComment;return p.default.createElement(s.default,{dataSource:t,header:`${t.length} \u8bc4\u8bba`,itemLayout:"horizontal",renderItem:e=>p.default.createElement(F,{handleReplyComment:a,key:e["id"],comment:e})})},M=e=>{var t=e.onChange,a=e.onSubmit,l=e.submitting,n=e.value;return p.default.createElement("div",null,p.default.createElement(d.default.Item,null,p.default.createElement(w,{rows:4,onChange:t,value:n})),p.default.createElement(d.default.Item,null,p.default.createElement(c.default,{htmlType:"submit",loading:l,onClick:a,type:"primary"},"\u6dfb\u52a0\u8bc4\u8bba")))},T=(R=(0,C.connect)(e=>{var t=e.articleDetail;return{articleDetail:t}}),R(S=class extends p.Component{constructor(){super(...arguments),this.state={submitting:!1,commentContent:"",replyCommentContent:"",replyCommentisible:!1,comment:{}},this.handleSubmit=(()=>{if(this.state.commentContent){var e=this.props.dispatch;this.setState({submitting:!0}),e({type:"articleDetail/createComment",payload:{content:this.state.commentContent},callback:()=>{this.setState({submitting:!1,commentContent:""})}})}}),this.handleChange=(e=>{this.setState({commentContent:e.target.value})}),this.handleReplyComment=(e=>{this.setState({replyCommentisible:!this.state.replyCommentisible,comment:e})}),this.handleReplyCommentChange=(e=>{this.setState({replyCommentContent:e.target.value})}),this.handleSubmitReplyComment=(()=>{if(this.state.replyCommentContent){var e=this.props.dispatch;this.setState({submitting:!0}),e({type:"articleDetail/createComment",payload:{reply:this.state.comment.id,content:this.state.replyCommentContent},callback:()=>{this.setState({replyCommentisible:!1,replyCommentContent:"",comment:""})}})}})}componentDidMount(){var e=this.props,t=e.dispatch,a=e.match,l=a.params.url;t({type:"articleDetail/get",payload:l}),t({type:"articleDetail/getComments",payload:l})}render(){var e=this.props.articleDetail,t=e.article,a=e.comments,l=this.state,n=l.submitting,c=l.commentContent,d=l.replyCommentContent,s=t["content"]?(0,_.default)(t["content"]):"";return p.default.createElement(m.default,{gutter:8},p.default.createElement(y.Helmet,null,p.default.createElement("title",null,t["title"]),p.default.createElement("meta",{name:"keywords",content:t["keywords"]}),p.default.createElement("meta",{name:"description",content:t["description"]})),p.default.createElement(r.default,{span:17},p.default.createElement("div",{className:E.default.detail},p.default.createElement("h1",{className:E.default.title},t["title"]),p.default.createElement("div",{className:E.default.articleFooter},p.default.createElement("span",null,(0,b.formatDate)(t["release_time"])),p.default.createElement("span",{className:g.default.dot}),p.default.createElement(D,{type:"eye",theme:"filled",text:t["view_count"]}),p.default.createElement("span",{className:g.default.dot}),p.default.createElement("a",{href:"#comment"},p.default.createElement(D,{type:"message",theme:"filled",text:t["comment_count"]})),t.tags?p.default.createElement(p.Fragment,null,p.default.createElement("span",{className:g.default.dot}),t.tags.map(e=>p.default.createElement(v.default,{className:g.default.tagLink,key:e,to:`/tag/${e}`},e))):p.default.createElement(p.Fragment,null)),p.default.createElement(o.default,null),p.default.createElement("div",{className:N.default.articleContent,dangerouslySetInnerHTML:{__html:s}})),p.default.createElement("div",{id:"comment",className:E.default.comment},a.length>0&&p.default.createElement(L,{handleReplyComment:this.handleReplyComment,comments:a}),p.default.createElement(u.default,{content:p.default.createElement(M,{onChange:this.handleChange,onSubmit:this.handleSubmit,submitting:n,value:c})}),p.default.createElement(i.default,{closable:!1,visible:this.state.replyCommentisible,onOk:this.handleSubmitReplyComment,onCancel:()=>this.handleReplyComment({})},p.default.createElement(w,{rows:4,onChange:this.handleReplyCommentChange,value:d})))))}})||S),x=T;t.default=x},bnNk:function(e,t,a){e.exports={detail:"detail___2aRzU",title:"title___1JNLJ",articleFooter:"articleFooter___2Tnpf",comment:"comment___15N71"}}}]);