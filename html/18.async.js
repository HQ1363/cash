(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"0dng":function(e,t,a){e.exports={card:"card___1lLg_",heading:"heading___3iSdG",steps:"steps___2QPgQ",errorIcon:"errorIcon___3sjJd",errorPopover:"errorPopover___15mhh",errorListItem:"errorListItem___Wg8Mo",errorField:"errorField___1jSBm",editable:"editable___hpZUP",advancedForm:"advancedForm___3hN7R",optional:"optional___16e6u"}},"2OH4":function(e,t,a){"use strict";var l=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var i=l(a("bx4M"));a("14J3");var d=l(a("BMrR"));a("jCWc");var n=l(a("kPKH"));a("DZo9");var u=l(a("8z0m"));a("Pwec");var s=l(a("CtXQ")),o=l(a("jehZ"));a("+L6B");var m=l(a("2/Rp")),c=l(a("p0pE"));a("2qtc");var f=l(a("kLXV"));a("5NDa");var p=l(a("5rEg"));a("OaEy");var h=l(a("2fM7"));a("y8nQ");var g=l(a("Vl3Y"));a("Znn+");var v=l(a("ZTPi")),E=l(a("DlQD")),y=l(a("FIf5"));a("nyGS");var C,b,_,w,I=r(a("q1tI")),k=a("MuoO"),V=l(a("0dng")),P=a("dCQc"),A=a("20nU"),L=a("TJpk");E.default.setOptions({highlight:e=>y.default.highlightAuto(e).value});var q=v.default.TabPane,S=g.default.Item,M=h.default.Option,F=p.default.TextArea,R={labelCol:{sm:{span:2}},wrapperCol:{sm:{span:22}}},D={labelCol:{sm:{span:8}},wrapperCol:{sm:{span:10}}},T=(C=(0,k.connect)(e=>{var t=e.adminArticleCreate;return{adminArticleCreate:t}}),b=g.default.create(),C(_=b((w=class extends I.PureComponent{constructor(){super(...arguments),this.state={previewVisible:!1,uploadImageVisible:!1,previewImage:"",fileList:[]},this.handleChangeContent=(e=>{var t=this.props.dispatch;t({type:"adminArticleCreate/setState",payload:{output:(0,E.default)(e.target.value)}})}),this.handleCustomUploadImage=(e=>{var t=e.file,a=new FormData;a.append("img",t),(0,P.uploadImage)(a).then(e=>{var t=e.path;this.setState({uploadImageVisible:!1}),f.default.success({title:"\u4e0a\u4f20\u6210\u529f",content:`${A.MediaPath+t}`})})}),this.handleCreateArticle=(()=>{var e=this.props,t=e.form.validateFieldsAndScroll,a=e.dispatch;t((e,t)=>{if(!e)if(t["img"]){var l=t["img"].file,r=new FormData;r.append("img",l["originFileObj"]),(0,P.uploadImage)(r).then(e=>{var l=e.path,r=(0,c.default)({},t,{img:A.MediaPath+l,keywords:t.tags.join()});a({type:"adminArticleCreate/create",payload:r})})}else{var i=(0,c.default)({},t,{keywords:t.tags.join()});a({type:"adminArticleCreate/create",payload:i})}})}),this.handleCancel=(()=>this.setState({previewVisible:!1})),this.handlePreview=(e=>{this.setState({previewImage:e.thumbUrl,previewVisible:!0})}),this.handleChange=(e=>{var t=e.fileList;return this.setState({fileList:t})})}componentDidMount(){var e=this.props,t=e.dispatch,a=e.location;t({type:"adminArticleCreate/getTags"});var l=a.query.id;t(l?{type:"adminArticleCreate/getDetail",payload:l}:{type:"adminArticleCreate/setState",payload:{article:{},value:"",output:""}})}render(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.previewVisible,l=t.previewImage,r=t.fileList,c=this.props.adminArticleCreate,E=c.tags,y=c.article,C=c.value,b=c.output;return I.default.createElement(i.default,{className:V.default.card,bordered:!1},I.default.createElement(L.Helmet,null,I.default.createElement("title",null,"\u521b\u5efa\u6587\u7ae0 - \u7ba1\u7406\u540e\u53f0")),I.default.createElement(v.default,{tabBarExtraContent:I.default.createElement("div",null,I.default.createElement(m.default,{type:"primary",onClick:()=>{this.setState({uploadImageVisible:!0})},icon:"upload"},"\u4e0a\u4f20\u56fe\u7247"),I.default.createElement(m.default,{type:"primary",onClick:this.handleCreateArticle,style:{marginLeft:10}},"\u63d0\u4ea4"))},I.default.createElement(q,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},I.default.createElement(g.default,{hideRequiredMark:!0},I.default.createElement(S,(0,o.default)({},R,{label:"\u6807\u9898"}),e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],initialValue:y?y["title"]:null})(I.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),I.default.createElement(S,(0,o.default)({},R,{label:"URL"}),e("url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165URL"}],initialValue:y?y["url"]:null})(I.default.createElement(p.default,{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165URL"}))),I.default.createElement(S,(0,o.default)({},R,{label:"\u6458\u8981"}),e("description",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6458\u8981"}],initialValue:y?y["description"]:null})(I.default.createElement(F,{rows:3,placeholder:"\u8bf7\u8f93\u5165\u6458\u8981"}))),I.default.createElement(S,(0,o.default)({},R,{label:"\u6807\u7b7e"}),e("tags",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u7b7e"}],initialValue:y?y["tags"]:[]})(I.default.createElement(h.default,{mode:"tags",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6587\u7ae0\u6807\u7b7e",onChange:this.handleTagChange},E.map(e=>I.default.createElement(M,{key:e["name"]},e["name"]))))),I.default.createElement(d.default,{gutter:16},I.default.createElement(n.default,{span:6},I.default.createElement(S,(0,o.default)({},D,{label:"\u5c01\u9762\u56fe"}),e("img",{})(I.default.createElement(u.default,{name:"img",listType:"picture",fileList:r,disabled:1===r.length,onPreview:this.handlePreview,onChange:this.handleChange},I.default.createElement(m.default,null,I.default.createElement(s.default,{type:"upload"})))))),I.default.createElement(n.default,{span:6},I.default.createElement(S,(0,o.default)({},D,{label:"\u72b6\u6001"}),e("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u72b6\u6001"}],initialValue:y["status"]?y["status"]:1})(I.default.createElement(h.default,{style:{width:"100%"}},I.default.createElement(M,{value:1},"\u53d1\u5e03"),I.default.createElement(M,{value:2},"\u8349\u7a3f"))))),I.default.createElement(n.default,{span:6},I.default.createElement(S,(0,o.default)({},D,{label:"\u7c7b\u578b"}),e("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u578b"}],initialValue:y["type"]?y["type"]:1})(I.default.createElement(h.default,{style:{width:"100%"}},I.default.createElement(M,{value:1},"\u6587\u7ae0"),I.default.createElement(M,{value:2},"\u4e13\u9898")))))))),I.default.createElement(q,{tab:"\u6587\u7ae0\u5185\u5bb9",key:"2"},I.default.createElement(g.default,{hideRequiredMark:!0},I.default.createElement(S,null,e("content",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:C})(I.default.createElement(F,{onChange:this.handleChangeContent,placeholder:"\u8bf7\u8f93\u5165",autosize:{minRows:20}}))))),I.default.createElement(q,{tab:"\u6587\u7ae0\u9605\u89c8",key:"3"},I.default.createElement("article",{class:"markdown-body",dangerouslySetInnerHTML:{__html:b}}))),I.default.createElement(f.default,{visible:a,footer:null,onCancel:this.handleCancel},I.default.createElement("img",{style:{width:"100%"},src:l})),I.default.createElement(f.default,{visible:this.state.uploadImageVisible,footer:null,onCancel:()=>{this.setState({uploadImageVisible:!1})},destroyOnClose:!0,keyboard:!1,maskClosable:!1},I.default.createElement(u.default,{name:"img",listType:"picture",onPreview:this.handlePreview,customRequest:this.handleCustomUploadImage},I.default.createElement(m.default,null,I.default.createElement(s.default,{type:"upload"}),"\u4e0a\u4f20\u56fe\u7247"))))}},_=w))||_)||_),j=T;t.default=j}}]);