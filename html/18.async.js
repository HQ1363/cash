(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"0dng":function(e,a,t){e.exports={card:"card___1lLg_",heading:"heading___3iSdG",steps:"steps___2QPgQ",errorIcon:"errorIcon___3sjJd",errorPopover:"errorPopover___15mhh",errorListItem:"errorListItem___Wg8Mo",errorField:"errorField___1jSBm",editable:"editable___hpZUP",advancedForm:"advancedForm___3hN7R",optional:"optional___16e6u"}},"2OH4":function(e,a,t){"use strict";t.r(a);t("IzEo");var l,r,i,n,s=t("bx4M"),o=(t("14J3"),t("BMrR")),c=(t("jCWc"),t("kPKH")),m=(t("DZo9"),t("8z0m")),d=(t("Pwec"),t("CtXQ")),p=t("pVnL"),u=t.n(p),h=(t("+L6B"),t("2/Rp")),g=t("MVZn"),E=t.n(g),v=(t("2qtc"),t("kLXV")),y=(t("5NDa"),t("5rEg")),C=(t("OaEy"),t("2fM7")),b=(t("y8nQ"),t("Vl3Y")),w=(t("Znn+"),t("ZTPi")),_=t("DlQD"),V=t.n(_),f=t("FIf5"),I=t.n(f),k=(t("nyGS"),t("q1tI")),L=t.n(k),A=t("MuoO"),P=t("0dng"),q=t.n(P),S=t("dCQc"),F=t("20nU"),M=t("TJpk");V.a.setOptions({highlight:e=>I.a.highlightAuto(e).value});var O=w["a"].TabPane,R=b["a"].Item,j=C["a"].Option,D=y["a"].TextArea,T={labelCol:{sm:{span:2}},wrapperCol:{sm:{span:22}}},U={labelCol:{sm:{span:8}},wrapperCol:{sm:{span:10}}},Q=(l=Object(A["connect"])(e=>{var a=e.adminArticleCreate;return{adminArticleCreate:a}}),r=b["a"].create(),l(i=r((n=class extends k["PureComponent"]{constructor(){super(...arguments),this.state={previewVisible:!1,uploadImageVisible:!1,previewImage:"",fileList:[]},this.handleChangeContent=(e=>{var a=this.props.dispatch;a({type:"adminArticleCreate/setState",payload:{output:V()(e.target.value)}})}),this.handleCustomUploadImage=(e=>{var a=e.file,t=new FormData;t.append("img",a),Object(S["C"])(t).then(e=>{var a=e.path;this.setState({uploadImageVisible:!1}),v["a"].success({title:"\u4e0a\u4f20\u6210\u529f",content:`${F["a"]+a}`})})}),this.handleCreateArticle=(()=>{var e=this.props,a=e.form.validateFieldsAndScroll,t=e.dispatch;a((e,a)=>{if(!e)if(a["img"]){var l=a["img"].file,r=new FormData;r.append("img",l["originFileObj"]),Object(S["C"])(r).then(e=>{var l=e.path,r=E()({},a,{img:F["a"]+l,keywords:a.tags.join()});t({type:"adminArticleCreate/create",payload:r})})}else{var i=E()({},a,{keywords:a.tags.join()});t({type:"adminArticleCreate/create",payload:i})}})}),this.handleCancel=(()=>this.setState({previewVisible:!1})),this.handlePreview=(e=>{this.setState({previewImage:e.thumbUrl,previewVisible:!0})}),this.handleChange=(e=>{var a=e.fileList;return this.setState({fileList:a})})}componentDidMount(){var e=this.props,a=e.dispatch,t=e.location;a({type:"adminArticleCreate/getTags"});var l=t.query.id;a(l?{type:"adminArticleCreate/getDetail",payload:l}:{type:"adminArticleCreate/setState",payload:{article:{},value:"",output:""}})}render(){var e=this.props.form.getFieldDecorator,a=this.state,t=a.previewVisible,l=a.previewImage,r=a.fileList,i=this.props.adminArticleCreate,n=i.tags,p=i.article,g=i.value,E=i.output;return L.a.createElement(s["a"],{className:q.a.card,bordered:!1},L.a.createElement(M["Helmet"],null,L.a.createElement("title",null,"\u521b\u5efa\u6587\u7ae0 - \u7ba1\u7406\u540e\u53f0")),L.a.createElement(w["a"],{tabBarExtraContent:L.a.createElement("div",null,L.a.createElement(h["a"],{type:"primary",onClick:()=>{this.setState({uploadImageVisible:!0})},icon:"upload"},"\u4e0a\u4f20\u56fe\u7247"),L.a.createElement(h["a"],{type:"primary",onClick:this.handleCreateArticle,style:{marginLeft:10}},"\u63d0\u4ea4"))},L.a.createElement(O,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},L.a.createElement(b["a"],{hideRequiredMark:!0},L.a.createElement(R,u()({},T,{label:"\u6807\u9898"}),e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],initialValue:p?p["title"]:null})(L.a.createElement(y["a"],{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),L.a.createElement(R,u()({},T,{label:"URL"}),e("url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165URL"}],initialValue:p?p["url"]:null})(L.a.createElement(y["a"],{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165URL"}))),L.a.createElement(R,u()({},T,{label:"\u6458\u8981"}),e("description",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6458\u8981"}],initialValue:p?p["description"]:null})(L.a.createElement(D,{rows:3,placeholder:"\u8bf7\u8f93\u5165\u6458\u8981"}))),L.a.createElement(R,u()({},T,{label:"\u6807\u7b7e"}),e("tags",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u7b7e"}],initialValue:p?p["tags"]:[]})(L.a.createElement(C["a"],{mode:"tags",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6587\u7ae0\u6807\u7b7e",onChange:this.handleTagChange},n.map(e=>L.a.createElement(j,{key:e["name"]},e["name"]))))),L.a.createElement(o["a"],{gutter:16},L.a.createElement(c["a"],{span:6},L.a.createElement(R,u()({},U,{label:"\u5c01\u9762\u56fe"}),e("img",{})(L.a.createElement(m["a"],{name:"img",listType:"picture",fileList:r,disabled:1===r.length,onPreview:this.handlePreview,onChange:this.handleChange},L.a.createElement(h["a"],null,L.a.createElement(d["a"],{type:"upload"})))))),L.a.createElement(c["a"],{span:6},L.a.createElement(R,u()({},U,{label:"\u72b6\u6001"}),e("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u72b6\u6001"}],initialValue:p["status"]?p["status"]:1})(L.a.createElement(C["a"],{style:{width:"100%"}},L.a.createElement(j,{value:1},"\u53d1\u5e03"),L.a.createElement(j,{value:2},"\u8349\u7a3f"))))),L.a.createElement(c["a"],{span:6},L.a.createElement(R,u()({},U,{label:"\u7c7b\u578b"}),e("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u578b"}],initialValue:p["type"]?p["type"]:1})(L.a.createElement(C["a"],{style:{width:"100%"}},L.a.createElement(j,{value:1},"\u6587\u7ae0"),L.a.createElement(j,{value:2},"\u4e13\u9898")))))))),L.a.createElement(O,{tab:"\u6587\u7ae0\u5185\u5bb9",key:"2"},L.a.createElement(b["a"],{hideRequiredMark:!0},L.a.createElement(R,null,e("content",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}],initialValue:g})(L.a.createElement(D,{onChange:this.handleChangeContent,placeholder:"\u8bf7\u8f93\u5165",autosize:{minRows:20}}))))),L.a.createElement(O,{tab:"\u6587\u7ae0\u9605\u89c8",key:"3"},L.a.createElement("article",{class:"markdown-body",dangerouslySetInnerHTML:{__html:E}}))),L.a.createElement(v["a"],{visible:t,footer:null,onCancel:this.handleCancel},L.a.createElement("img",{style:{width:"100%"},src:l})),L.a.createElement(v["a"],{visible:this.state.uploadImageVisible,footer:null,onCancel:()=>{this.setState({uploadImageVisible:!1})},destroyOnClose:!0,keyboard:!1,maskClosable:!1},L.a.createElement(m["a"],{name:"img",listType:"picture",onPreview:this.handlePreview,customRequest:this.handleCustomUploadImage},L.a.createElement(h["a"],null,L.a.createElement(d["a"],{type:"upload"}),"\u4e0a\u4f20\u56fe\u7247"))))}},i=n))||i)||i);a["default"]=Q}}]);